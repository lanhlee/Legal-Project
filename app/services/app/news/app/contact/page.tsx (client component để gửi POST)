"use client"
import { useState } from "react"

export default function ContactPage(){
  const [form, setForm] = useState({name:'',email:'',phone:'',area:'',message:''})
  const [status, setStatus] = useState('')
  async function submit(e:any){
    e.preventDefault()
    setStatus('sending')
    try {
      const res = await fetch('/api/contact', {
        method:'POST',
        headers:{'content-type':'application/json'},
        body: JSON.stringify(form)
      })
      const j = await res.json()
      if(res.ok) setStatus('sent')
      else setStatus('error: '+ j?.error)
    } catch(err){
      setStatus('error')
    }
  }
  return (
    <div>
      <h2 className="text-2xl font-semibold mb-4">Gửi yêu cầu tư vấn</h2>
      <form onSubmit={submit} className="grid gap-3 max-w-xl">
        <input required placeholder="Họ và tên" value={form.name} onChange={e=>setForm({...form,name:e.target.value})} className="p-3 border rounded"/>
        <input required placeholder="Email" value={form.email} onChange={e=>setForm({...form,email:e.target.value})} className="p-3 border rounded"/>
        <input placeholder="Điện thoại" value={form.phone} onChange={e=>setForm({...form,phone:e.target.value})} className="p-3 border rounded"/>
        <select required value={form.area} onChange={e=>setForm({...form,area:e.target.value})} className="p-3 border rounded">
          <option value="">Chọn lĩnh vực</option>
          <option value="doanh-nghiep">Doanh nghiệp & Đầu tư</option>
          <option value="dat-dai">Đất đai & Xây dựng</option>
          <option value="hop-dong">Hợp đồng & Dân sự</option>
        </select>
        <textarea placeholder="Mô tả ngắn" value={form.message} onChange={e=>setForm({...form,message:e.target.value})} className="p-3 border rounded"></textarea>
        <button className="w-40 bg-sky-600 text-white p-2 rounded">Gửi</button>
        <div>{status}</div>
      </form>
    </div>
  )
}
